# Classes in Pyrl
# Demonstrates object-oriented programming with Pyrl-style classes

# ===========================================
# BASIC CLASS DEFINITION
# ===========================================

class Person {
    prop name
    prop age
    
    init($n, $a) = {
        $name = $n;
        $age = $a
    }
    
    method greet() = {
        return "Hello, I'm " + $name
    }
    
    method get_info() = {
        return $name + " is " + str($age) + " years old"
    }
}

print("=== Person Class ===")
$alice = Person("Alice", 30)
$bob = Person("Bob", 25)

print($alice.greet())
print($bob.get_info())

# ===========================================
# CLASS WITH METHODS
# ===========================================

class Counter {
    prop count = 0
    
    init($start) = {
        $count = $start
    }
    
    method increment() = {
        $count = $count + 1;
        return $count
    }
    
    method decrement() = {
        $count = $count - 1;
        return $count
    }
    
    method get() = {
        return $count
    }
    
    method reset($value) = {
        $count = $value
    }
}

print("=== Counter Class ===")
$counter = Counter(0)
print("Initial: " + str($counter.get()))
print("After increment: " + str($counter.increment()))
print("After increment: " + str($counter.increment()))
print("After decrement: " + str($counter.decrement()))
$counter.reset(100)
print("After reset: " + str($counter.get()))

# ===========================================
# CLASS WITH CALCULATION
# ===========================================

class Rectangle {
    prop width = 0
    prop height = 0
    
    init($w, $h) = {
        $width = $w;
        $height = $h
    }
    
    method area() = {
        return $width * $height
    }
    
    method perimeter() = {
        return 2 * ($width + $height)
    }
    
    method is_square() = {
        return $width == $height
    }
}

print("=== Rectangle Class ===")
$rect = Rectangle(10, 20)
print("Area: " + str($rect.area()))
print("Perimeter: " + str($rect.perimeter()))
print("Is square: " + str($rect.is_square()))

$square = Rectangle(5, 5)
print("Square area: " + str($square.area()))
print("Is square: " + str($square.is_square()))

# ===========================================
# UTILITY CLASS
# ===========================================

class Calculator {
    prop result = 0
    
    init($initial) = {
        $result = $initial
    }
    
    method add($x) = {
        $result = $result + $x;
        return $result
    }
    
    method subtract($x) = {
        $result = $result - $x;
        return $result
    }
    
    method multiply($x) = {
        $result = $result * $x;
        return $result
    }
    
    method get() = {
        return $result
    }
}

print("=== Calculator Class ===")
$calc = Calculator(10)
print("Initial: " + str($calc.get()))
print("Add 5: " + str($calc.add(5)))
print("Multiply 2: " + str($calc.multiply(2)))
print("Subtract 3: " + str($calc.subtract(3)))

# ===========================================
# CLASS FOR DATA MODELING
# ===========================================

class BankAccount {
    prop owner = ""
    prop balance = 0
    
    init($owner_name, $initial_balance) = {
        $owner = $owner_name;
        $balance = $initial_balance
    }
    
    method deposit($amount) = {
        $balance = $balance + $amount;
        return True
    }
    
    method withdraw($amount) = {
        $balance = $balance - $amount;
        return True
    }
    
    method get_balance() = {
        return $balance
    }
}

print("=== BankAccount Class ===")
$account1 = BankAccount("Alice", 1000)
$account2 = BankAccount("Bob", 500)

print("Alice balance: $" + str($account1.get_balance()))
print("Bob balance: $" + str($account2.get_balance()))

$account1.deposit(200)
print("After deposit, Alice: $" + str($account1.get_balance()))

$account1.withdraw(300)
print("After withdraw, Alice: $" + str($account1.get_balance()))

print("=== Classes Demo Complete ===")
