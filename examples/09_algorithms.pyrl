# Algorithms in Pyrl
# Common algorithms implemented in Pyrl

# ===========================================
# SORTING ALGORITHMS
# ===========================================

# Bubble Sort
def bubble_sort(@arr):
    @result = copy(@arr)
    $n = len(@result)
    
    for $i in range($n):
        $swapped = False
        for $j in range($n - $i - 1):
            if @result[$j] > @result[$j + 1]:
                $temp = @result[$j]
                @result[$j] = @result[$j + 1]
                @result[$j + 1] = $temp
                $swapped = True
    
    return @result

@unsorted = [64, 34, 25, 12, 22, 11, 90]
print("Bubble sort:")
print("  Input: " + str(@unsorted))
print("  Output: " + str(bubble_sort(@unsorted)))

# Selection Sort
def selection_sort(@arr):
    @result = copy(@arr)
    $n = len(@result)
    
    for $i in range($n):
        $min_idx = $i
        for $j in range($i + 1, $n):
            if @result[$j] < @result[$min_idx]:
                $min_idx = $j
        
        $temp = @result[$i]
        @result[$i] = @result[$min_idx]
        @result[$min_idx] = $temp
    
    return @result

print("Selection sort:")
print("  Output: " + str(selection_sort(@unsorted)))

# ===========================================
# SEARCHING ALGORITHMS
# ===========================================

# Linear Search
def linear_search(@arr, $target):
    $idx = 0
    for $item in @arr:
        if $item == $target:
            return $idx
        $idx = $idx + 1
    return -1

@search_data = [10, 20, 30, 40, 50]
print("Linear search for 30:")
print("  Index: " + str(linear_search(@search_data, 30)))

# Binary Search (requires sorted array)
def binary_search(@arr, $target):
    $left = 0
    $right = len(@arr) - 1
    
    while $left <= $right:
        $mid = ($left + $right) // 2
        
        if @arr[$mid] == $target:
            return $mid
        elif @arr[$mid] < $target:
            $left = $mid + 1
        else:
            $right = $mid - 1
    
    return -1

@sorted_data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
print("Binary search for 7:")
print("  Index: " + str(binary_search(@sorted_data, 7)))

# ===========================================
# MATHEMATICAL ALGORITHMS
# ===========================================

# GCD (Greatest Common Divisor)
def gcd($a, $b):
    while $b != 0:
        $temp = $b
        $b = $a % $b
        $a = $temp
    return $a

print("GCD(48, 18) -> " + str(gcd(48, 18)))

# LCM (Least Common Multiple)
def lcm($a, $b):
    return abs($a * $b) // gcd($a, $b)

print("LCM(12, 18) -> " + str(lcm(12, 18)))

# Prime check
def is_prime($n):
    if $n < 2:
        return False
    if $n == 2:
        return True
    if $n % 2 == 0:
        return False
    
    $i = 3
    while $i * $i <= $n:
        if $n % $i == 0:
            return False
        $i = $i + 2
    
    return True

print("Prime numbers up to 20:")
@primes = []
for $n in range(2, 21):
    if is_prime($n):
        append(@primes, $n)
print("  " + str(@primes))

# ===========================================
# STRING ALGORITHMS
# ===========================================

# Palindrome check
def is_palindrome($s):
    $s = lower($s)
    $len = len($s)
    $i = 0
    $j = $len - 1
    while $i < $j:
        if $s[$i] != $s[$j]:
            return False
        $i = $i + 1
        $j = $j - 1
    return True

print("Palindrome check:")
print("  'radar': " + str(is_palindrome("radar")))
print("  'hello': " + str(is_palindrome("hello")))

# Count character frequency
def char_frequency($s):
    %freq = {}
    for $i in range(len($s)):
        $char = $s[$i]
        $current = get(%freq, $char, 0)
        %freq[$char] = $current + 1
    return %freq

print("Character frequency of 'hello':")
print("  " + str(char_frequency("hello")))

print("=== Algorithms Demo Complete ===")
